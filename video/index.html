<!DOCTYPE html>
<html>
<head>
    <title>Simple Media Player</title>
</head>
<body>

    <button id="downloadLogBtn">Download Log</button>
    <button id="playBtn">Play</button>

    <h1>Video Test</h1>
    
    <video width="640" height="360" controls>
      <source src="chrome.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

</body>
<script>
    // Create a Blob and a writable stream to log messages
    let logChunks = [];

    // Function to write a log message to the blob
    async function writeLog(message) {
        logChunks.push(new Date().toISOString() + " " + message + "\n");
        console.log(message);
    }

    // Function to get a Blob of the log so far
    function getLogBlob() {
        return new Blob(logChunks, { type: "text/plain" });
    }

    document.getElementById('playBtn').addEventListener('click', async () => {
        try {
            const video = document.getElementById('video');
            await video.play();
            writeLog("playing");
        } catch (error) {
            writeLog(`Error: ${error}`);
        }
    });

    document.getElementById('downloadLogBtn').addEventListener('click', () => {
        const blob = getLogBlob();
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `log-${new Date().toISOString()}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    });
</script>
</html>
